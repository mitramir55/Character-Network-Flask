{% extends "base.html" %}

{% block content %}
<br>
<br>
<div class="masthead-content">
    <div class="container px-5">
<hr>
<h5>Named Entity Recognition</h5>
 <p>In this section we use 
  <a href="https://github.com/fnielsen/afinn">SpaCy's large model.</a></p>

        <br>
        <p>In here we are using SpaCy's NER with the large model to identify the names in your text.
            After this step, we flatten the names (remove honararies, titles, or last names), sort them, and 
            ask you to take a look to make sure no extra info is included. You get to choose the number of 
            characters you want to stay in the game for the final analysis.
            
        </p>

        <br> <br>
        <form action="#"  method="post" enctype="multipart/form-data">
            <p>How many names do you want to have in your character analysis? (recommended = 25)
                <input type="text" name="n"></p>
            <p><input type="submit" name="submit" value="Find the Names!"  class="btn btn-success"></p>
        </form>

        <br>
        <br>
        {% if received %}
        <p>Here are top n characters of this novel: </p>
        {% print "Here is the total number of unique names found:" %}
        {{length}}
        <br>
        <table  class="table">
            <tr>
                {% for col in column_names %}
                <th style="background-color: #74c5c1;" class="col">{{ col }}</th>
                {% endfor %}
            </tr>
            {% for row in row_data %}
            <tr scope="row">
                {% for col, row_ in zip(column_names, row) %}
                {% if col == link_column %}
                <td>
                        {{ row_ }}
                </td>
                {% else %}
                <td>{{row_}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}

        </table>

    
        <br>

        <p>Sometimes, the SpaCy model might not recognize specific names 
            (especially rare names or names coined by the author). In that case, we can make sure that the cadre of 
        characters is complete by searching for the name and ranking it ourself.</p>
        <p>Please add one name at a time (if any name is missed), or just click on the "no missed names" button.</p>
        <form action="#"  method="post" enctype="multipart/form-data">
            <p>Missed name:
                <input type="text" name="unrecognized_name"></p>
            <p><input type="submit" name="submit" value="Find this name!" class="btn btn-success"></p>
                <p><input type="submit" name="submit" value="No missing piece!" class="btn btn-success"></p>
        </form>
            
        {% endif %}


</div>
</div>


{% endblock %}